<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
{% for printer in printers %}
<div class="relative pt-1">
  <div class="flex mb-2 items-center justify-between">
    <div>
      <span
        class="
          text-xs
          font-semibold
          inline-block
          py-1
          px-2
          uppercase
          rounded-full
          text-purple-600
          bg-purple-200
        "
      >
        Print in progress
      </span>
    </div>
    <div class="text-right">
      <span class="text-xs font-semibold inline-block text-purple-600">
        {{ '%0.2f'|format(responses.p2.progress.printTimeLeft|float) }}%
      </span>
    </div>
  </div>
  <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-purple-200">
    <div
      id="{{printer.name}}bar"
      class="
        shadow-none
        flex flex-col
        text-center
        whitespace-nowrap
        text-white
        justify-center
        bg-purple-500
        w-0
      "
    ></div>
  </div>
</div>
{% endfor %}
<script>
    let responses = {{ responses|tojson }};
    console.log(responses);
    document.addEventListener("DOMContentLoaded", function(){
        let bar = document.getElementById('p2bar');
        bar.classList.remove('w-0');
        console.log(responses.p2.progress.printTimeLeft/21600);
        bar.style.width = responses.p2.progress.printTimeLeft/21600 + "%";
    });
</script>
</body>
</html>
